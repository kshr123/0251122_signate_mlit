# 国土数値情報と外部データ活用の整理

**作成日**: 2025-11-23
**目的**: train/testに含まれていない、国土数値情報等の外部データで追加できる特徴量を整理

---

## 📊 現在のtrain/testデータに含まれている情報

### 位置情報（2特徴量）
- ✅ 経度（lon）
- ✅ 緯度（lat）

### 住所情報（基本情報のみ）
- ✅ full_address（住所文字列）
- ⚠️ **都道府県・市区町村コード等の構造化データは未含有**

### 交通アクセス（12特徴量）
- ✅ 路線名・駅名（最大3つまで）
- ✅ 所要時間・距離
- ⚠️ **駅の座標、路線の詳細情報は未含有**

### 周辺施設（13特徴量）
- ✅ 小学校・中学校の名称と距離
- ✅ コンビニ・スーパー・病院の距離
- ⚠️ **施設の詳細情報、密度、品質は未含有**

### 土地情報（15特徴量）
- ✅ 用途地域
- ✅ 都市計画
- ✅ 容積率・建蔽率
- ⚠️ **地価、地形、災害リスク等は未含有**

---

## 🌐 国土数値情報（国土交通省）で追加可能なデータ

国土数値情報（MLIT Data Platform）から取得できる主要データと、train/testとの差分を整理します。

### 🔴 優先度：高（価格予測に直接影響）

#### 1. **地価公示データ**
- **データ名**: 地価公示・地価調査
- **含まれる情報**:
  - 地点ごとの公示地価（円/m²）
  - 前年比変動率
  - 用途区分（住宅地、商業地等）
- **train/testとの差分**:
  - ❌ **地価情報は未含有**
- **活用方法**:
  - 物件の緯度経度から最寄りの地価公示地点を検索
  - Haversine距離で最も近い地点の地価を特徴量化
  - 複数地点（TOP 3等）の平均地価も有効
- **期待される効果**: ★★★★★
  - 地価は不動産価格の最も強い説明変数の一つ

---

#### 2. **駅データ（駅別乗降客数）**
- **データ名**: 駅別乗降客数データ
- **含まれる情報**:
  - 駅名、路線名
  - 年間乗降客数
  - 駅の座標（緯度経度）
- **train/testとの差分**:
  - ❌ **駅の乗降客数（=駅の重要度）は未含有**
  - ❌ **駅の座標は未含有**
- **活用方法**:
  - train/testの「駅名1, 2, 3」と結合
  - 乗降客数を特徴量化（利便性の指標）
  - 駅の座標から物件までの正確な距離計算
- **期待される効果**: ★★★★☆
  - 主要駅（乗降客数が多い）近くは高額になる傾向

---

#### 3. **用途地域の詳細情報**
- **データ名**: 用途地域データ（ポリゴン）
- **含まれる情報**:
  - 用途地域の境界（GeoJSON/Shapefile）
  - 詳細な規制内容
- **train/testとの差分**:
  - ⚠️ **用途地域の文字列は含有**
  - ❌ **用途地域の境界ポリゴンは未含有**
- **活用方法**:
  - 物件の緯度経度が用途地域のどのポリゴンに含まれるか判定
  - 用途地域ごとのTarget Encoding
  - 用途地域の境界からの距離（境界エリアは価格が不安定な可能性）
- **期待される効果**: ★★★☆☆
  - train/testに既に文字列で含まれているため、追加効果は限定的
  - ただし境界からの距離等は新規特徴量

---

### 🟡 優先度：中（間接的に価格に影響）

#### 4. **標高・地形データ**
- **データ名**: 標高データ（DEM: Digital Elevation Model）
- **含まれる情報**:
  - 地点ごとの標高（メートル）
  - 傾斜角度
  - 地形分類（低地、台地、山地等）
- **train/testとの差分**:
  - ❌ **標高・地形情報は未含有**
- **活用方法**:
  - 緯度経度から標高を取得
  - 傾斜地は価格が低い、高台は眺望が良く価格が高い等
  - 低地は浸水リスク → ネガティブ要因
- **期待される効果**: ★★★☆☆
  - 地域によっては重要（東京等の平地が多いエリアでは効果薄）

---

#### 5. **ハザードマップ（浸水想定区域、土砂災害警戒区域）**
- **データ名**: 洪水浸水想定区域、土砂災害警戒区域
- **含まれる情報**:
  - 浸水想定深さ（m）
  - 土砂災害リスク（警戒区域、特別警戒区域）
- **train/testとの差分**:
  - ❌ **災害リスク情報は未含有**
- **活用方法**:
  - 物件の緯度経度が浸水想定区域・土砂災害警戒区域に含まれるか判定
  - 浸水想定深さを特徴量化
  - 災害リスクが高い → 価格が低い傾向
- **期待される効果**: ★★☆☆☆
  - 近年の自然災害増加で重要性が高まっている
  - ただしリスク情報が価格に反映されるまでにタイムラグあり

---

#### 6. **都市計画道路**
- **データ名**: 都市計画道路データ
- **含まれる情報**:
  - 計画道路の位置（ライン）
  - 計画状況（計画中、事業中、完成）
- **train/testとの差分**:
  - ❌ **都市計画道路情報は未含有**
- **活用方法**:
  - 物件が都市計画道路に近いか判定
  - 計画道路に近い → 将来の立ち退きリスク → 価格低下
  - 完成済み道路に近い → アクセス向上 → 価格上昇
- **期待される効果**: ★★☆☆☆
  - 影響範囲が限定的（都市計画道路沿いの物件のみ）

---

#### 7. **公示地価の経年変化**
- **データ名**: 地価公示（過去データ）
- **含まれる情報**:
  - 過去5年間の地価推移
  - 地価上昇率
- **train/testとの差分**:
  - ❌ **地価の経年変化は未含有**
- **活用方法**:
  - 地価上昇率が高いエリア → 将来価値の期待 → 価格上昇
  - 地価下落エリア → 価格下落
- **期待される効果**: ★★★☆☆
  - トレンド情報は有用だが、train/testの時系列分割に注意

---

### 🟢 優先度：低（補助的な情報）

#### 8. **公共施設（図書館、公園、公共交通機関）**
- **データ名**: 公共施設データ
- **含まれる情報**:
  - 図書館、公園、公民館等の位置
- **train/testとの差分**:
  - ⚠️ **一部施設（小学校、病院等）は含有**
  - ❌ **図書館、公園等は未含有**
- **活用方法**:
  - 最寄りの図書館・公園までの距離
  - 公園面積（大きな公園が近い → 住環境良好）
- **期待される効果**: ★★☆☆☆
  - 補助的な住環境指標

---

#### 9. **人口統計（メッシュ人口）**
- **データ名**: 国勢調査 メッシュ人口
- **含まれる情報**:
  - 500m メッシュ単位の人口
  - 年齢別人口（若年層、高齢者層）
  - 世帯数
- **train/testとの差分**:
  - ❌ **人口統計は未含有**
- **活用方法**:
  - 物件周辺の人口密度
  - 若年層が多いエリア → 需要が高い → 価格上昇
  - 高齢化率が高いエリア → 価格低下の可能性
- **期待される効果**: ★★☆☆☆
  - 都市部では人口密度が均一で効果薄
  - 地方では有効

---

#### 10. **道路ネットワーク（道路幅員、道路種別）**
- **データ名**: 道路ネットワークデータ
- **含まれる情報**:
  - 道路の幅員（m）
  - 道路種別（国道、県道、市道等）
  - 道路の座標（ライン）
- **train/testとの差分**:
  - ❌ **道路詳細情報は未含有**
- **活用方法**:
  - 物件が幹線道路に面しているか判定
  - 幹線道路に近い → 騒音リスク → 価格低下
  - 道路幅員が広い → 車両通行が容易 → 価格上昇（郊外）
- **期待される効果**: ★☆☆☆☆
  - 影響は限定的

---

## 🔍 その他の外部データ源

### A. **不動産ポータルサイトのデータ（Webスクレイピング）**
- **SUUMO、HOME'S等の公開データ**
  - 同じエリアの類似物件の価格
  - 物件の写真、間取り図（画像特徴量）
  - 口コミ評価
- ⚠️ **注意**: 利用規約を確認（スクレイピング禁止の場合あり）

### B. **Google Maps API / OpenStreetMap**
- **POI（Point of Interest）データ**
  - 飲食店、コンビニ、ATM等の密度
  - 周辺施設の評価（Googleレビュー）
- **ルート検索**
  - 主要駅までの実際の移動時間（徒歩、車、公共交通）
- ⚠️ **注意**: API利用料金が発生

### C. **気象データ**
- **日照時間、降水量、気温**
  - 地域ごとの気候条件
- **期待される効果**: ★☆☆☆☆
  - 不動産価格への影響は間接的

---

## 📋 実装の優先順位と実現可能性

| 優先度 | データ名 | 期待効果 | 実装難易度 | 備考 |
|--------|---------|---------|-----------|------|
| 🔴 1 | **地価公示データ** | ★★★★★ | 🟢 低 | 最優先で実装すべき |
| 🔴 2 | **駅別乗降客数** | ★★★★☆ | 🟢 低 | 駅データとの結合 |
| 🟡 3 | **標高・地形** | ★★★☆☆ | 🟡 中 | DEM解析が必要 |
| 🟡 4 | **ハザードマップ** | ★★☆☆☆ | 🟡 中 | GISライブラリ必要 |
| 🟢 5 | **人口統計** | ★★☆☆☆ | 🟢 低 | メッシュデータ結合 |
| 🟢 6 | **公共施設** | ★★☆☆☆ | 🟢 低 | 距離計算のみ |
| 🟢 7 | **道路ネットワーク** | ★☆☆☆☆ | 🔴 高 | GIS解析が必要 |

---

## 🚀 推奨アクションプラン

### Phase 1: 高優先度データの取得と結合（最優先）

1. **地価公示データの取得**
   - 国土数値情報からダウンロード
   - train/testの緯度経度から最寄りの地価公示地点を検索
   - 距離ベースで地価を特徴量化

2. **駅データの取得**
   - 駅別乗降客数データのダウンロード
   - train/testの「駅名1, 2, 3」と結合
   - 駅の座標から物件までの正確な距離計算

### Phase 2: 中優先度データの検討（余裕があれば）

3. **標高・地形データ**
   - DEMデータから標高を取得
   - 傾斜、地形分類を特徴量化

4. **ハザードマップ**
   - 浸水想定区域、土砂災害警戒区域のGISデータ取得
   - 物件がリスク区域に含まれるか判定

### Phase 3: 補助的データ（オプション）

5. **人口統計、公共施設等**

---

## 📝 実装時の注意点

### データ結合の方法
- **緯度経度ベース**: Haversine距離で最寄りデータを検索
- **住所ベース**: 都道府県・市区町村コードで結合
- **駅名ベース**: 駅名の表記ゆれに注意（正規化が必要）

### データリークの防止
- 外部データの基準日をtrain/testの時系列分割に合わせる
- 例: 2023年のtest データに対して2024年の地価データを使わない

### GISライブラリの選定
- **推奨**: `geopandas`, `shapely`, `rtree`
- **用途**: ポリゴン判定、距離計算、空間結合

---

**最終更新**: 2025-11-23
